<ion-content [fullscreen]="true" class="ion-padding">
  <h1 class="myHeader"> Livestock Care</h1>
  <img alt="car" src="../../../assets/images/logo.png" />
  <ion-segment color="custom"  [(ngModel)]="registerationType" (ionChange)="onRegistrationTypeChange()">
    <ion-segment-button  value="register-user">
      <ion-label>User</ion-label>
    </ion-segment-button>
    <ion-segment-button  value="register-admin">
      <ion-label>Admin</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="registerationType">
    <form [formGroup]="registerForm" class="ion-padding-top" *ngIf="registerationType == 'register-user'" >
      <ion-input
        class="ion-text-center"
        fill="outline"
        type="text"
        class="top-margin"
        placeholder="Enter First Name"
        formControlName="name"
      ></ion-input>
      <div *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
        <span class="error-message" *ngIf="registerForm.get('name')?.errors?.['required']">First name is required.</span>
      </div>
      <ion-input
        class="ion-text-center"
        fill="outline"
        type="text"
        class="top-margin"
        placeholder="Enter Last Name"
        formControlName="lastName"
      ></ion-input>
      
      <div *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
        <span class="error-message" *ngIf="registerForm.get('lastName')?.errors?.['required']">Last name is required.</span>
      </div>
      <ion-input
        class="ion-text-center"
        fill="outline"
        type="email"
        class="top-margin"
        placeholder="Enter Email"
        formControlName="email"
      ></ion-input>
      
      <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
        <span class="error-message" *ngIf="registerForm.get('email')?.errors?.['required']">Email is required.</span>
        <span class="error-message" *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format.</span>
      </div>
      <ion-input
        class="ion-text-center"
        type="text"
        class="top-margin"
        fill="outline"
        placeholder="Address"
        formControlName="address"
      ></ion-input>
      
      <div *ngIf="registerForm.get('address')?.invalid && registerForm.get('address')?.touched">
        <span class="error-message" *ngIf="registerForm.get('address')?.errors?.['required']">Address is required.</span>
      </div>
      <ion-input
        class="ion-text-center"
        type="tel"
        fill="outline"
        class="top-margin"
        placeholder="Phone Number"
        formControlName="phoneNumber"
      ></ion-input>
      
      <div *ngIf="registerForm.get('phoneNumber')?.invalid && registerForm.get('phoneNumber')?.touched">
        <span class="error-message" *ngIf="registerForm.get('phoneNumber')?.errors?.['required']">Phone Number is required.</span>
        <span class="error-message" *ngIf="registerForm.get('phoneNumber')?.errors?.['pattern']">Invalid phone number format. Phone number should start with 6 or 5 and have a minimum of 8 digits.</span>
      </div>
      <ion-input
        class="ion-text-center"
        type="password"
        fill="outline"
        class="top-margin"
        placeholder="Enter password"
        formControlName="password"
      ></ion-input>
      
      <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        <span class="error-message" *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</span>
        <span class="error-message" *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters long.</span>
        <span class="error-message" *ngIf="registerForm.get('password')?.errors?.['pattern']">Password must contain characters(- _ ! $).</span>
      </div>
      <ion-button
        class="ion-padding ion-xxl mycolor"
        expand="full"
        type="submit"
        (click)="registerUser()"
        >
        Register
      </ion-button>
      <div class="ion-text-center">
        <p>
          Already have an account? <a routerLink="/login" class="page-link">Login here</a>
        </p>
      </div>    
    </form>
    <form *ngIf="registerationType == 'register-admin'"[formGroup]="registerForm" class="ion-padding-top">
      <ion-input
        class="ion-text-center"
        fill="outline"
        type="text"
        class="top-margin"
        placeholder="Enter First Name"
        formControlName="name"
      ></ion-input>
      <div *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
        <span class="error-message" *ngIf="registerForm.get('name')?.errors?.['required']">First name is required.</span>
      </div>
      <ion-input
        class="ion-text-center"
        fill="outline"
        type="email"
        class="top-margin"
        placeholder="Enter Email"
        formControlName="email"
      ></ion-input>
      
      <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
        <span class="error-message" *ngIf="registerForm.get('email')?.errors?.['required']">Email is required.</span>
        <span class="error-message" *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format.</span>
      </div>
      <ion-input
        class="ion-text-center"
        type="text"
        fill="outline"
        class="top-margin"
        placeholder="Vet license  number"
        formControlName="vetLicenseNumber"
      ></ion-input>
      
      <div *ngIf="registerForm.get('vet-license-number')?.invalid && registerForm.get('vet-license-number')?.touched">
        <span class="error-message" *ngIf="registerForm.get('vetLicenseNumber')?.errors?.['required']">Address is required.</span>
      </div>
      <ion-select
        name="consultationHours"
        (ionChange)="consultationTime($event.detail.value)"
        formControlName="consultationHours"
        fill="outline"
        class="top-margin"
        class="ion-text-center"
        placeholder="Select time"
      >
        <ion-select-option value="30min">30min</ion-select-option>
        <ion-select-option value="1hr">1hr</ion-select-option>
        <ion-select-option value="1hr-30min">1hr-30min</ion-select-option>
        <ion-select-option value="2hr">2hr</ion-select-option>
      </ion-select>
      
      <ion-input
        class="ion-text-center"
        type="tel"
        fill="outline"
        class="top-margin"
        placeholder="Phone Number"
        formControlName="phoneNumber"
      ></ion-input>
      
      <div *ngIf="registerForm.get('phoneNumber')?.invalid && registerForm.get('phoneNumber')?.touched">
        <span class="error-message" *ngIf="registerForm.get('phoneNumber')?.errors?.['required']">Phone Number is required.</span>
        <span class="error-message" *ngIf="registerForm.get('phoneNumber')?.errors?.['pattern']">Invalid phone number format. Phone number should start with 6 or 5 and have a minimum of 8 digits.</span>
      </div>
      <ion-input
        class="ion-text-center"
        type="password"
        fill="outline"
        class="top-margin"
        placeholder="Enter password"
        formControlName="password"
      ></ion-input>
      
      <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        <span class="error-message" *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</span>
        <span class="error-message" *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters long.</span>
        <span class="error-message" *ngIf="registerForm.get('password')?.errors?.['pattern']">Password must contain characters(- _ ! $).</span>
      </div>
      <ion-button
        class="ion-padding ion-xxl mycolor"
        expand="full"
        type="submit"
        (click)="registerUser()"
        >
        Register
      </ion-button>
      <div class="ion-text-center">
        <p>
          Already have an account? <a routerLink="/login" class="page-link">Login here</a>
        </p>
      </div>
    </form>
  </div>
</ion-content>
